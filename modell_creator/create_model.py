import os
import subprocess
import gensim.models.word2vec as wv

CORES = os.cpu_count() + 4

path = 'D:/repos/java_corpus'

subprocess.run(['java', '-jar', '../java_line_pred.jar', path, '-threaded'])

print("Lexing done!")

with open('./corpus.txt','r', errors='ignore') as fp:

    sentences = wv.LineSentence(fp)

    model = wv.Word2Vec(sentences=sentences, min_count=1, workers=CORES)
    model.save("word2vec.model")